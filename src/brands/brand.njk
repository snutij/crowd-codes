---
pagination:
  data: brands
  size: 1
  alias: brand
permalink: "brands/{{ brand.slug }}/"
eleventyComputed:
  title: "Code promo {{ brand.name }} | {{ page.date | dateMonthYear | capitalize }} - Crowd Codes"
  description: "{{ brand.codes.length }} codes promo {{ brand.name }} vérifiés. Copiez-les en un clic, sans inscription."
  canonicalUrl: "{{ site.hostname }}/brands/{{ brand.slug }}/"
---
{% extends "base.njk" %}

{% block head %}
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "ItemList",
  "name": "Codes promo {{ brand.name | escape }}",
  "description": "{{ brand.codes.length }} codes promo {{ brand.name | escape }} vérifiés.",
  "url": "{{ site.hostname }}/brands/{{ brand.slug }}/",
  "numberOfItems": {{ brand.codes.length }},
  "itemListElement": [
    {% for code in brand.codes | sort(true, false, 'found_at') %}
    {
      "@type": "ListItem",
      "position": {{ loop.index }},
      "name": {{ code.code | dump | safe }}
    }{% if not loop.last %},{% endif %}
    {% endfor %}
  ]
}
</script>
{% endblock %}

{% block content %}
<h1>Codes promo {{ brand.name }}</h1>

<section id="results" class="results-container" aria-label="Codes promo {{ brand.name }}">
  {% if brand.codes.length > 0 %}
    {% for code in brand.codes | sort(true, false, 'found_at') %}
      <article class="code-card" data-code-id="{{ code.id }}" data-code-value="{{ code.code }}">
        <div class="code-card-main">
          <code class="code-value">{{ code.code }}</code>
          <button class="copy-btn" type="button" aria-label="Copier le code {{ code.code }}">Copier</button>
        </div>
        <div class="code-card-meta">
          <span class="code-brand">{{ code.brand_name }}</span>
          <span class="code-date">{{ code.found_at | formatRelativeDate }}</span>
          {% if code.source_channel %}
            <span class="code-source">{{ code.source_channel }}</span>
          {% endif %}
        </div>
      </article>
    {% endfor %}
  {% else %}
    <div class="empty-state" role="status">
      <p class="empty-state-title">Aucun code trouvé pour {{ brand.name }}</p>
      <p class="empty-state-message">Nous surveillons les influenceurs YouTube chaque jour.</p>
      <p class="empty-state-suggestion">Revenez bientôt pour découvrir de nouveaux codes.</p>
    </div>
  {% endif %}
</section>

<p><a href="/">← Retour à la recherche</a></p>
{% endblock %}
